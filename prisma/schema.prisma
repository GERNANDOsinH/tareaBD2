generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model Usuario {
  nombre String @db.VarChar(20)
  email String @id @db.VarChar(150)
  descripcion String @db.VarChar(500)
  clave String @db.VarChar(15)

  direccion_favorita direccion_favorita[]
  direccion_bloqueada direccion_bloqueada[]

  remitente correo[] @relation("remitente")
  destinatario correo[] @relation("destinatario")
}

model direccion_favorita {
  correo_usuario String
  direccion_favorita String @db.VarChar(150)
  fecha_agregado DateTime @default(now())

  usuario Usuario @relation(fields: [correo_usuario], references: [email])
  @@id([correo_usuario, direccion_favorita])
}

model direccion_bloqueada {
  correo_usuario String
  direccion_bloqueada String @db.VarChar(150)
  fecha_agregado DateTime @default(now())

  usuario Usuario @relation(fields: [correo_usuario], references: [email])
  @@id([correo_usuario, direccion_bloqueada])
}

model correo {
  id Int @id @default(autoincrement())
  correo_remitente String
  correo_destinatario String
  fecha_envio DateTime @default(now())
  es_favorito Boolean

  remitente Usuario @relation("remitente", fields: [correo_remitente], references:[email])
  destinatario Usuario @relation("destinatario", fields: [correo_destinatario], references: [email])
}